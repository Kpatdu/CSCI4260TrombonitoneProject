<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baritone</title>

    <!-- polyfill -->
    <script src="./inc/shim/Base64.js" type="text/javascript"></script>
    <script src="./inc/shim/Base64binary.js" type="text/javascript"></script>
    <script src="./inc/shim/WebAudioAPI.js" type="text/javascript"></script>
    <!-- midi.js package -->
    <script src="./js/midi/audioDetect.js" type="text/javascript"></script>
    <script src="./js/midi/gm.js" type="text/javascript"></script>
    <script src="./js/midi/loader.js" type="text/javascript"></script>
    <script src="./js/midi/plugin.audiotag.js" type="text/javascript"></script>
    <script src="./js/midi/plugin.webaudio.js" type="text/javascript"></script>
    <script src="./js/midi/plugin.webmidi.js" type="text/javascript"></script>
    <!-- utils -->
    <script src="./js/util/dom_request_xhr.js" type="text/javascript"></script>
    <script src="./js/util/dom_request_script.js" type="text/javascript"></script>
</head>


<header>
    <div id="navbar"></div>
</header>

<body>
    <h1>Trombone</h1>
</body>

<script>
    function loadNavbar() {
        document.getElementById('navbar').innerHTML = 
        '<object type = "text/html" data="navbar.html"></object>';
    }

    window.onload = function () {
        loadNavbar();
    };

    const img_strt = new Image();
    img_strt.src = './assets/trombone/Trombone.png';
    img_strt.alt = '';
    img_strt.style.display = 'block';

    img_strt.onload = () => document.body.appendChild(img_strt);

    document.addEventListener('keydown', (e) => {
        keysPressed[e.key.toLowerCase()] = true;
    });

    document.addEventListener('keyup', (e) => {
        keysPressed[e.key.toLowerCase()] = false;
    });

    function updateDisplay() {
        if (isNone()) {
            img_strt.style.display = 'block';
        }

        requestAnimationFrame(updateDisplay);
    }

    requestAnimationFrame(updateDisplay);

    function isNone() {
        return Object.values(keysPressed).every(value => value === false);
    }
</script>
</html>